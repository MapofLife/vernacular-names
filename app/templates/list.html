{% extends "templates/base.html" %}

{% block page_title %}{{ search_criteria }}{% endblock %}

{% block style %}
#scrolled_search_results {
    border: 1px solid black;
}

table.search_results tr.selected td {
    background: yellow;
}

table.search_results td {
    padding: 0.5em;
    border: 1px solid black;
}


table.search_results tr:nth-child(even) {
    background: #ddd;
}
{% endblock %}

{% block content %}
        <p><strong>{{ search_criteria }}</strong></p>

        {% if not name_list %}
            <p><strong>No names matched.</strong></p>
        {% else %}
            <p>Displaying {{ name_list|length }} results from {{ offset + 1 }} to {{offset + display_count }} out of {{ '%d' % total_count }}.</p>
            <table border="1">
                {% block list_nav %}<td colspan="9" style="text-align: center">
                    <a href="?offset=0&display={{display_count}}">|&lt;</a>

                    {% if offset - display_count >= 0 %}
                        <a href="?offset={{offset - display_count}}&display={{display_count}}">&lt;&lt;</a>
                    {% else %}
                        &lt;&lt;
                    {% endif %}

                    |
                    <a href="?offset={{offset}}&display=20">20</a>
                    <a href="?offset={{offset}}&display=40">40</a>
                    <a href="?offset={{offset}}&display=60">60</a>
                    <a href="?offset={{offset}}&display=80">80</a>
                    <a href="?offset={{offset}}&display=100">100</a>
                    |

                    {% if total_count == 0 or offset + display_count < total_count %}
                        <a href="?offset={{offset + display_count}}&display={{display_count}}">&gt;&gt;</a>
                    {% else %}
                        &gt;&gt;
                    {% endif %}

                    {% if total_count != 0 %}
                        <a href="?offset={{total_count - display_count}}&display={{display_count}}">&gt;|</a>
                    {% endif %}
                </td>{% endblock %}
                <tr>
                    <th>&nbsp;</th>
                    <th>Species</th>
                    {% for name in language_names_list %}
                        <th>{{ language_names[name] }}</th>
                    {% endfor %}
                </tr>
                {% for name in name_list %}
                    <tr>
                        <td>{{ loop.index + offset }}</td>
                        <td><em><a href="http://names.mol-api.appspot.com/?lookup={{name}}&search={{name}}">{{ name }}</a></em></td>
                        <!--
                        <td style="font-size: 8pt"><tt>http://names.mol-api.appspot.com/?lookup={{name|replace(' ', '+')}}&amp;search={{name|replace(' ', '+')}}</tt></td>
                        -->
                        {% for lang in language_names_list %}
                            {% if lang in vnames[name] %}
                                <td><a href="/?lookup={{name}}&search={{name}}#lang-{{lang}}">{{ vnames[name][lang].vernacularname }}</a></td>
                            {% else %}
                                <td><a href="/?lookup={{name}}&search={{name}}#lang-{{lang}}"><em>None</em></a></td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
                {{ self.list_nav() }}
            </table>
        {% endif %}

{% endblock %}
